---
import Modal from '../ui/Modal.astro';
import Tabs from '../ui/Tabs.astro';
import TechItem from '../cards/TechItem.astro';
import { getEntry } from 'astro:content';

interface Props {
    title: string;
    tabLabels: {
        technologies: string;
        programs: string;
        os: string;
    };
}

const { title, tabLabels } = Astro.props;

const techEntry = await getEntry('technologies', 'data');
const tech = techEntry?.data;

const tabs = [
    { id: 'tech', label: tabLabels.technologies },
    { id: 'prog', label: tabLabels.programs },
    { id: 'os', label: tabLabels.os },
];
---

<Modal id="technologies" title={title} variant="technology">
    {tech ? (
            <Tabs tabs={tabs} name="tech">
                <div slot="tech" class:list={[
                    'grid gap-6',
                    'grid-cols-[repeat(auto-fill,minmax(180px,1fr))]',
                    'max-lg:grid-cols-[repeat(auto-fill,minmax(160px,1fr))] max-lg:gap-5',
                    'max-md:grid-cols-[repeat(auto-fill,minmax(140px,1fr))] max-md:gap-4',
                    'max-sm:grid-cols-2 max-sm:gap-2',
                    'max-[360px]:grid-cols-1'
                ]}>
                    {tech.technologies.map(item => (
                            <TechItem icon={item.icon} name={item.name} />
                    ))}
                </div>

                <div slot="prog" class:list={[
                    'grid gap-6',
                    'grid-cols-[repeat(auto-fill,minmax(180px,1fr))]',
                    'max-lg:grid-cols-[repeat(auto-fill,minmax(160px,1fr))] max-lg:gap-5',
                    'max-md:grid-cols-[repeat(auto-fill,minmax(140px,1fr))] max-md:gap-4',
                    'max-sm:grid-cols-2 max-sm:gap-2',
                    'max-[360px]:grid-cols-1'
                ]}>
                    {tech.programmingTools.map(item => (
                            <TechItem icon={item.icon} name={item.name} />
                    ))}
                </div>

                <div slot="os" class:list={[
                    'grid gap-6',
                    'grid-cols-[repeat(auto-fill,minmax(180px,1fr))]',
                    'max-lg:grid-cols-[repeat(auto-fill,minmax(160px,1fr))] max-lg:gap-5',
                    'max-md:grid-cols-[repeat(auto-fill,minmax(140px,1fr))] max-md:gap-4',
                    'max-sm:grid-cols-2 max-sm:gap-2',
                    'max-[360px]:grid-cols-1'
                ]}>
                    {tech.operatingSystems.map(item => (
                            <TechItem icon={item.icon} name={item.name} />
                    ))}
                </div>
            </Tabs>
    ) : (
            <p>No technologies found.</p>
    )}
</Modal>